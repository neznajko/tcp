################################################################
import sys
import socket
################################################################
from bhp import hexdump
################################################################
HOST = ''
PORT = 4000
SOCK = socket.socket( type=socket.SOCK_DGRAM )
BUFRSIZ = 4096
###############################################################_
def client():
    print( f"Sending data files .." )
    SOCK.sendto( b'\x73\xdc\xa9\x6b\x24', ( HOST, PORT ))
###############################################################_
################################################################
def server():
    print( f"Listening on port {PORT} .." )
    SOCK.bind(( HOST, PORT ))
    while True:
        try:
            data, addr = SOCK.recvfrom( BUFRSIZ )
            print( f"{addr[ 0 ]}:{addr[ 1 ]}")
            hexdump( data )
        except KeyboardInterrupt: break #                 Ctrl-C
    SOCK.close()
################################################################
################################################################
################################################################
if __name__ == '__main__':
    ( client, server )[ 1 == len( sys.argv )]()
################################################################
################################################################
################################################################
################################################################
# Usage: tty-1: python3 06-udp.py
#        tty-2: python3 06-udp.py client
